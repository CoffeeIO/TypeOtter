var mlTex=function(e,t){function n(e){e.find("*[title!=''][title]").each(function(e){"P"===t(this).prop("tagName")?t(this).prepend('<span class="para-title">'+t(this).attr("title")+"</span>"):"SECTION"===t(this).prop("tagName")&&t(this).prepend('<a href="#mltex-toc"><h1 class="section-title">'+t(this).attr("title")+"</h1></a>"),t(this).attr("data-title",t(this).attr("title")),t(this).removeAttr("title")})}function r(e){e.find("*[name!=''][name]").each(function(e){"IMG"===t(this).prop("tagName")?t(this).before('<a name="'+t(this).attr("name")+'"></a>'):t(this).prepend('<a name="'+t(this).attr("name")+'"></a>')})}function i(e){var n=1;e.find("img").each(function(e){var r=t(this);"FIGURE"!==r.parent().prop("tagName")&&r.wrap("<figure>"),r.closest("figure").attr("data-fig",n++)})}function a(e){e.find("img[caption!=''][caption]").each(function(e){var n=t(this),r=n.closest("figure").attr("data-fig");n.after("<figcaption>Figure "+r+": "+n.attr("caption")+"</figcaption>")})}function o(e){e.find("img[width!=''][width]").each(function(e){t(this).css("width",t(this).attr("width"))}),e.find("img[height!=''][height]").each(function(e){t(this).css("height",t(this).attr("height"))})}function l(e){e.find('a[url=""]').each(function(e){var n=t(this),r=n.attr("href");n.html(r).attr("target","_blank")})}function c(e){e.find('*[newpage=""]').each(function(){var e=t(this);e.before('<div class="tex-newpage"></div>')})}function h(e){e.find("script").remove()}return e.attrify=function(e){l(e),c(e),i(e),n(e),r(e),a(e),o(e),h(e)},e}(mlTex||{},jQuery),mlTex=function(e,t){function n(e,n){var r=[];return e.find('a[cite=""]').each(function(){var e=t(this),i=e.attr("href"),a="";if(void 0===i)return console.error('Cite needs "href" attribute: %s',e.clone().wrap("<span>").parent().html()),!0;if(i=i.substr(1),null===n)return console.error("Could not find reference: %s",i),!0;var o=n[i];if(void 0===o)return console.error("Could not find reference: %s",i),!0;if(void 0===o.title||""===o.title.trim())return console.error('Reference "%s" needs a title',i),!0;if(void 0===o["tex-ref-name"]){var l=o.title.substr(0,3),c="";void 0===r[l]?r[l]=1:r[l]++,r[l]<10&&(c="0");var h=l+c+r[l];o["tex-ref-name"]=h}void 0===o["tex-ref-count"]&&(o["tex-ref-count"]=0),o["tex-ref-count"]++,void 0!==e.attr("cmt")&&""!==e.attr("cmt").trim()&&(a=", "+e.attr("cmt")),e.html(o["tex-ref-name"]+a)}),n}function r(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}function i(e){var t='<span class="tex-ref-book">';return o.forEach(function(n){void 0!==e[n]&&(t+='<span class="tex-book-'+n+'">'+e[n]+"</span>")}),void 0!==e["tex-ref-count"]&&(t+='<span class="tex-book-cite" tex-count="'+e["tex-ref-count"]+'"></span>'),t+"</span>"}function a(e,t){var n=r(t);n.forEach(function(t){t.startsWith("tex-")||o.indexOf(t)===-1&&console.warn('Unknown attribute in "%s": %s',e,t)})}var o=["author","title","editor","edition","volume","series","number","note","address","publisher","month","year"];return e.makeRefPage=function(e,t){var t=n(e,t),o=!1,l=r(t),c='<div class="tex-ref"><h1 class="tex-ref-title">References</h1><table>';l.forEach(function(e){a(e,t[e]),void 0!==t[e]["tex-ref-name"]&&(o=!0,c+='<tr class="tex-ref-row" tex-ref-name="'+e+'">',c+='<a name="'+e+'"></a>',c+='<td><span class="tex-ref-name">'+t[e]["tex-ref-name"]+"</span></td>",c+="<td>"+i(t[e])+"</td>",c+="</tr>")}),c+="</table></div>",o&&e.append(c)},e.fillRef=function(e){e.find(".tex-ref-row").each(function(){var n=t(this),i=n.attr("tex-ref-name"),a=[];e.find('a[cite=""][href="#'+i+'"]').each(function(){var e=t(this),n=e.closest(".page").attr("data-page");a[n]=!0});var o=r(a),l=n.find(".tex-book-cite"),c="";o.forEach(function(e){c+='<a href="#tex-page-'+e+'">'+e+"</a>, "}),c=c.substr(0,c.length-2),l.html(c),l.attr("tex-count",o.length)})},e}(mlTex||{},jQuery),mlTex=function(e,t){return e.includeFiles=function(e){var n=0;e.find('a[include=""]').each(function(e){var r=t(this),i=r.attr("href");void 0!==i&&""!==i&&(n++,r.load(i,function(e){void 0===e?console.error('File: "%s" was not found',i):r.after(r.html()),r.remove(),n--}))});var r=setInterval(function(){n<=0&&(e.find('a[include=""]').length>0&&includeFiles(e),clearInterval(r))},50)},e}(mlTex||{},jQuery),mlTex=function(e,t){return e.inlineMath="a579438542e77567a744e7abaeaac7ae",e.blockMath="1a73f16f7ac6dc3674c729ed2524bcc6",e.handleMath=function(n){var r=1;n.find("e").each(function(){var n=t(this);0===n.closest("p").length?(n.html(e.blockMath+n.html()+e.blockMath),n.attr("data-math",r++).attr("tex-math-style","block")):(n.html(e.inlineMath+n.html()+e.inlineMath),n.attr("tex-math-style","inline"))})},e.fillMath=function(e){e.find('e[tex-math-style="block"]').each(function(){var e=t(this),n=e.find(".MathJax_Display");n.append('<span class="tex-math-count" style="line-height: '+n.outerHeight()+'px">'+e.attr("data-math")+"</span>")})},e}(mlTex||{},jQuery),mlTex=function(e,t){function n(e,t){for(var n in t)({}).hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function r(e){var t=/^[\s]*([0-9]+[\w%]*)[\s]+([0-9]+[\w%]*)[\s]+([0-9]+[\w%]*)[\s]+([0-9]+[\w%]*)[\s]*$/,n=/^[\s]*([0-9]+[\w%]*)[\s]+([0-9]+[\w%]*)[\s]*$/,r=/^[\s]*([0-9]+[\w%]*)[\s]*$/,i=t.exec(e);return null!==i?{top:i[1],right:i[2],bottom:i[3],left:i[4]}:(i=n.exec(e),null!==i?{top:i[1],right:i[2],bottom:i[1],left:i[2]}:(i=r.exec(e),null!==i?{top:i[1],right:i[1],bottom:i[1],left:i[1]}:null))}function i(e){var n=r(e.padding),i="body {  width: "+e.width+"; }.page { height: calc("+e.height+" - "+n.top+" - "+n.bottom+"); width: calc("+e.width+" - "+n.left+" - "+n.right+"); padding: "+e.padding+"; }.content { height: calc("+e.height+" - "+n.top+" - "+n.bottom+" - "+e.headerHeight+" - "+e.footerHeight+"); }.header { height: "+e.headerHeight+"; line-height: "+e.headerHeight+"; }.footer { height: "+e.footerHeight+"; line-height: "+e.footerHeight+"; }";t('<style type="text/css">'+i+"</style>").appendTo("head")}function a(e,t){return e.pager.replace("[cur]",t.number).replace("[total]",t.total)}function o(e,t){var n=t.header.wrapper,r="";return"[pager]"!==e.headerLeft&&"[pager]"!==e.headerCenter&&"[pager]"!==e.headerRight||(r=a(e,t)),""!==e.headerLeft&&(n+="[pager]"===e.headerLeft?'<div class="left">'+r+"</div>":'<div class="left">'+e.headerLeft+"</div>"),""!==e.headerCenter&&(n+="[pager]"===e.headerCenter?'<div class="center">'+r+"</div>":'<div class="center">'+e.headerCenter+"</div>"),""!==e.headerRight&&(n+="[pager]"===e.headerRight?'<div class="right">'+r+"</div>":'<div class="right">'+e.headerRight+"</div>"),n+="</div>"}function l(e,t){var n=t.footer.wrapper,r="";return"[pager]"!==e.footerLeft&&"[pager]"!==e.footerCenter&&"[pager]"!==e.footerRight||(r=a(e,t)),""!==e.footerLeft&&(n+="[pager]"===e.footerLeft?'<div class="left">'+r+"</div>":'<div class="left">'+e.footerLeft+"</div>"),""!==e.footerCenter&&(n+="[pager]"===e.footerCenter?'<div class="center">'+r+"</div>":'<div class="center">'+e.footerCenter+"</div>"),""!==e.footerRight&&(n+="[pager]"===e.footerRight?'<div class="right">'+r+"</div>":'<div class="right">'+e.footerRight+"</div>"),n+="</div>"}function c(e,t,n){var r='<a name="tex-page-'+n.number+'"></a>';return r+='<div class="page" data-page="'+n.number+'">',r+=e,r+='<div class="content">'+n.content+"</div>",r+=t,r+="</div>"}function h(e,t,n,r){var i=r.html();return r.append(e.clone().wrap("<div>").parent().html()),t.outerHeight(!0)<=n?{content:t,remain:null,done:!1}:(r.html(i),null)}function s(e,t,n,r){var i=h(e,t,n,r);if(null!==i)return e.remove(),i;if(e.hasClass("tex-newpage"))return e.remove(),null;if(0===e.children().length)return null;var a=["P","SCRIPT","TABLE","STYLE","FIGURE"];if(a.indexOf(e.prop("tagName"))!==-1)return null;var o=e.clone().empty(),l=o.wrap("<div>").parent().html();for(r.append(l),r=r.children(":last-child");e.children().length>0;){var c=e.children(":nth-child(1)");if(i=s(c,t,n,r),null===i)break;if(i.done===!0)break;c.remove()}return 0===r.children().length&&r.remove(),{content:t,remain:e,done:!0}}function d(e,t,n){var r=e.page.height,i=s(t,n,r,n);return e.content=i.content.html(),{page:e,remain:i.remain}}var f={height:"296mm",width:"210mm",padding:"10mm",headerHeight:"6mm",footerHeight:"6mm",headerRight:"",headerCenter:"",headerLeft:"",footerRight:"",footerCenter:"[pager]",footerLeft:"",pager:"[cur]",pagerStyle:"1"},m=function(){this.number=1,this.total=1,this.content="",this.page={wrapper:'<div class="page">',height:""},this.header={wrapper:'<div class="header">',right:"",center:"",left:""},this.footer={wrapper:'<div class="footer">',right:"",center:"",left:""}};return e.texify=function(e,r){var a=n(f,e),h=new m;r.wrapInner("<div>"),i(a);var s=[],u="",p=r.find("> div").first().clone(),v=null,g=1;r.append('<div class="page" style="height: auto"><div class="content tex-testdom"></div></div>');var x=r.find(".tex-testdom");for(h.page.height=x.height(),x.css("height","auto");""!==p.html().trim();)x.html(""),s.push(d(t.extend(!0,[],h),p,x)),v=s[s.length-1],h.number=++g,null!=v.remain?p.html(v.remain.html()):p.html("");s.forEach(function(e,t){e.page.total=s.length;var n=o(a,e.page),r=l(a,e.page),i=c(n,r,e.page);u+=i}),x.parent().remove(),r.html(u)},e}(mlTex||{},jQuery),mlTex=function(e,t){return e.makeRef=function(e){e.find('a[ref=""]').each(function(){var n=t(this),r=n.attr("href");if(void 0===r)return console.error('Reference needs "href" attribute: %s',n.clone().wrap("<span>").parent().html()),!0;var i=e.find('a[name="'+r.substr(1)+'"]').first();0!==i.closest("e").length?n.html(i.closest("e").attr("data-math")):0!==i.closest("figure").length?n.html(i.closest("figure").attr("data-fig")):0!==i.closest("section").length?n.html(i.closest("section").attr("data-ref")):console.error("Unknown reference: %s",n.attr("href"))})},e}(mlTex||{},jQuery),mlTex=function(e,t){return e.addSpinner=function(e){var t='<div class="overlay tex-spinner"></div><div class="bookshelf_wrapper tex-spinner" style="display:block;"><ul class="books_list"><li class="book_item first"></li><li class="book_item second"></li><li class="book_item third"></li><li class="book_item fourth"></li><li class="book_item fifth"></li><li class="book_item sixth"></li></ul><div class="shelf"></div></div>';e.after(t)},e.removeSpinner=function(){t(".tex-spinner.bookshelf_wrapper").animate({opacity:0},500,function(){t(".tex-spinner").remove()})},e}(mlTex||{},jQuery),mlTex=function(e,t){function n(e,t,n,r){return'<a href="#mltex-'+e+'"><div class="'+r+'" data-ref="'+e+'"><div class="left"><span>'+t+"</span>"+n+'</div><div class="right" data-pageref=""></div></div></a>'}function r(e){var r="";return e.find("section").each(function(){var e=t(this),i=e.attr("data-ref"),a=i.split(".");return void 0===a[1]||"0"===a[1]?(r+=n(i,a[0],e.attr("data-title"),"sec"),!0):void 0===a[2]||"0"===a[2]?(r+=n(i,a[0]+"."+a[1],e.attr("data-title"),"subsec"),!0):void 0===a[3]||"0"===a[3]?(r+=n(i,a[0]+"."+a[1]+"."+a[2],e.attr("data-title"),"subsubsec"),!0):void 0===a[4]||"0"===a[4]?(r+=n(i,a[0]+"."+a[1]+"."+a[2]+"."+a[3],e.attr("data-title"),"subsubsubsec"),!0):void console.error("Only 3 subsection levels supported")}),r}function a(e,t){var n='<div class="toc"><a name="mltex-toc"></a><h1 class="toc-title">'+t+"</h1>";return n+=e+"</div>"}return e.indexToc=function(e){var n=[],r=t("section");r.each(function(){var r=t(this),a=r.parentsUntil(e,"section"),o=a.length;for(void 0===n[o]&&(n[o]=0),n[o]++,i=o+1;i<n.length;i++)n[i]=0;var l=n.join("."),c=l.indexOf(".0");c!==-1&&(l=l.substr(0,c)),r.attr("data-ref",l),r.prepend('<a name="mltex-'+l+'"></a>'),r.find(".section-title").first().prepend("<span>"+l+"</span>")})},e.makeToc=function(e){var n=r(e);e.find("toc").each(function(){var e=t(this),r="";r=void 0===e.attr("data-title")?"Contents":e.attr("data-title");var i=a(n,r);e.after(i),e.remove()})},e.fillToc=function(e){e.find(".toc").each(function(){var n=t(this);n.find("> a > div").each(function(){var n=e.find('section[data-ref="'+t(this).attr("data-ref")+'"]').first(),r=n.closest(".page");t(this).find(".right").html(r.attr("data-page"))})})},e}(mlTex||{},jQuery),mlTex=function(e,t){var n=/^[\s\b]*<[\w]+/;return e.wrapper=function(e){if(void 0===e.html())return e;var t="",r=e.clone(),i=["P","SCRIPT","TH","TD","LI","STYLE","FIGCAPTION","H1","H2","H3","H4","H5","E"];if(i.indexOf(r.prop("tagName"))!==-1)return e;if(""===r.html().trim())return e;for(;r.children().length>0;){n.test(r.html())===!1&&(r.html("<p>"+r.html()),t+=r.children(":nth-child(1)").clone().wrap("<div>").parent().html(),r.children(":nth-child(1)").remove());var a=this.wrapper(r.children(":nth-child(1)"));void 0!==a.html()&&(t+=a.wrap("<div>").parent().html()),r.children(":nth-child(1)").remove()}return""!==r.html().trim()&&n.test(r.html())===!1&&(r.html("<p>"+r.html()),t+=r.children(":nth-child(1)").clone().wrap("<div>").parent().html(),r.children(":nth-child(1)").remove()),e.html(t),e},e}(mlTex||{},jQuery),mathDone=!1,dom=null,DEBUG=!0,innerDone=!1,biblography={};$(document).ready(function(){DEBUG&&console.time("document prepare"),DEBUG&&console.time("document render"),DEBUG&&console.time("document math done"),DEBUG&&console.time("window loaded"),DEBUG&&console.time("document math preprocess"),dom=$("body"),mlTex.addSpinner(dom),mlTex.includeFiles(dom),mlTex.handleMath(dom),MathJax.Hub.Queue(["Typeset",MathJax.Hub])}),$(window).load(function(){DEBUG&&console.timeEnd("window loaded");var e={headerRight:"MGApcDev",headerCenter:"<i>by</i>",pager:"Page [cur] of [total]",padding:"7mm 10mm"},t=setInterval(function(){if(mathDone){var n=dom.find(".MathJax_Preview").length,r=dom.find(".MathJax").length,i=dom.find(".MathJax_Processing").length;n===r&&0===i&&(innerDone=!0),innerDone&&(DEBUG&&console.timeEnd("document math done"),clearInterval(t),setTimeout(function(){mlTex.attrify(dom),mlTex.wrapper(dom),mlTex.indexToc(dom),mlTex.makeToc(dom),mlTex.makeRef(dom),mlTex.makeRefPage(dom,biblography),mlTex.fillMath(dom),DEBUG&&console.timeEnd("document prepare"),mlTex.texify(e,dom),mlTex.fillToc(dom),mlTex.fillRef(dom),DEBUG&&console.timeEnd("document render"),mlTex.removeSpinner()},100))}},100)});